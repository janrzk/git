<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      
      lang="cs_CZ">


    <h:body>

        <f:metadata>
            <f:viewParam name="id" value="#{personDetailBean.personId}" />
            <f:viewAction action="#{personDetailBean.loadPerson}" onPostback="true"/>
        </f:metadata>

        
        <ui:composition template="/WEB-INF/templates/layout.xhtml">
            
            <div class="mb-3">
                <span class="h5">
                    Detail osoby
                </span>
            </div>

            <h:form styleClass="form mt-4">

                <h:panelGroup layout="block" styleClass="alert alert-danger" rendered="#{facesContext.validationFailed}">
                    Formulář obsahuje následující <strong>chyby</strong>:
                    <h:messages styleClass="my-0"/>
                </h:panelGroup>                    

                <div class="row">
                    <div class="form-group col-12 col-md-6">
                        <legend>Základní údaje</legend>                    

                        <div class="form-row mb-2">
                            <div class="col-2">
                                <label for="name">Jméno:</label>
                            </div>
                            <div class="col-10">
                                <h:inputText id="name" styleClass="form-control" value="#{personDetailBean.person.name}"/>
                            </div>
                        </div>

                        <div class="form-row mb-2">
                            <div class="col-2">
                                <label for="surname">Příjmení:</label>
                            </div>
                            <div class="col-10">
                                <h:inputText id="surname" styleClass="form-control" value="#{personDetailBean.person.surname}"/>
                            </div>
                        </div>

                        <div class="form-row mb-2">
                            <div class="col-2">
                                <label for="personal_no">Rodné číslo:</label>
                            </div>
                            <div class="col-10">
                                <h:inputText id="personal_no" styleClass="form-control" value="#{personDetailBean.person.personalNo}"/>
                            </div>
                        </div>
                    </div>

                    <div class="form-group col-12 col-md-6">
                        <legend>Trvalé bydliště</legend>                    
                        <div class="form-row mb-2">
                            <div class="col-2">
                                <label for="street">Ulice:</label>
                            </div>
                            <div class="col-10">
                                <h:inputText id="street" styleClass="form-control" value="#{personDetailBean.person.street}"/>
                            </div>
                        </div>

                        <div class="form-row mb-2">
                            <div class="col-2">
                                <label for="muni">Obec:</label>
                            </div>
                            <div class="col-10">
                                <h:inputText id="muni" styleClass="form-control" value="#{personDetailBean.person.muni}"/>
                            </div>
                        </div>

                        <div class="form-row mb-2">
                            <div class="col-2">
                                <label for="post_code">PSČ:</label>
                            </div>
                            <div class="col-10">
                                <h:inputText id="post_code" styleClass="form-control" value="#{personDetailBean.person.postCode}"/>
                            </div>
                        </div>
                    </div>

                </div>

                <div class="row">

                    <div class="form-group col-12 col-md-6">
                        <legend>Kontakt</legend>                    
                        <div class="form-row mb-2">
                            <div class="col-2">
                                <label for="phone_no">Telefon:</label>
                            </div>
                            <div class="col-10">
                                <h:inputText id="phone_no" styleClass="form-control" value="#{personDetailBean.person.phoneNo}"/>
                            </div>
                        </div>
                        <div class="form-row mb-2">
                            <div class="col-2">
                                <label for="email">E-mail:</label>
                            </div>
                            <div class="col-10">
                                <h:inputText id="email" styleClass="form-control" value="#{personDetailBean.person.email}"/>
                            </div>
                        </div>                            
                    </div>

                </div>

                <div class="row">
                    <div class="col">
                        <h:link styleClass="btn btn-primary mr-2 mb-2" outcome="/person_list.xhtml" value="Zpět"/>
                    </div>
                    <div class="col-auto align-self-end d-flex">
                        <h:commandButton styleClass="btn btn-warning mr-2 mb-2" action="#{personDetailBean.updatePerson()}" value="Aktualizovat údaje"/>
                        <h:commandButton styleClass="btn btn-danger mr-2 mb-2" action="#{personDetailBean.deletePerson()}" value="Smazat osobu" immediate="true"/>
                    </div>
                </div>
            </h:form>

            
        </ui:composition>
        
    </h:body>

    
</html>